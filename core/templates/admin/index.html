{% extends "admin/index.html" %}
{% load i18n static %}

{% block extrahead %}
{{ block.super }}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
    .dashboard-stats {
        display: flex;
        flex-wrap: wrap;
        margin: 0 -10px;
        margin-bottom: 20px;
    }
    
    .stat-box {
        flex: 1 0 200px;
        margin: 10px;
        padding: 15px;
        background: white;
        border-radius: 5px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
        text-align: center;
    }
    
    .stat-box h3 {
        margin-top: 0;
        color: #666;
        font-size: 14px;
        text-transform: uppercase;
    }
    
    .stat-value {
        font-size: 28px;
        font-weight: bold;
        color: #34a9a1;
    }
    
    .charts-container {
        display: flex;
        flex-wrap: wrap;
        margin: 0 -10px;
    }
    
    .chart-box {
        flex: 1 0 400px;
        margin: 10px;
        padding: 15px;
        background: white;
        border-radius: 5px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
    }
    
    .chart-box h3 {
        margin-top: 0;
        color: #666;
        font-size: 16px;
    }
    
    canvas {
        max-width: 100%;
    }
</style>
{% endblock %}

{% block content %}
<div id="content-main">
    <h1>Health Diary Dashboard</h1>
    
    <div class="dashboard-stats">
        <div class="stat-box">
            <h3>{% trans 'Total Users' %}</h3>
            <div class="stat-value">{{ user_count }}</div>
        </div>
        <div class="stat-box">
            <h3>{% trans 'Total Meals' %}</h3>
            <div class="stat-value">{{ meal_count }}</div>
        </div>
        <div class="stat-box">
            <h3>{% trans 'Health Logs' %}</h3>
            <div class="stat-value">{{ health_log_count }}</div>
        </div>
        <div class="stat-box">
            <h3>{% trans 'Sleep Logs' %}</h3>
            <div class="stat-value">{{ sleep_log_count }}</div>
        </div>
    </div>
    
    <div class="charts-container">
        <div class="chart-box">
            <h3>{% trans 'New Users Per Week' %}</h3>
            <canvas id="usersChart"></canvas>
        </div>
        <div class="chart-box">
            <h3>{% trans 'Daily Activity' %}</h3>
            <canvas id="activityChart"></canvas>
        </div>
    </div>
    
    {{ block.super }}
</div>

<script>
    // Placeholder data - in a real application these would be generated by the view
    const usersChartData = {
        labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
        datasets: [{
            label: 'New Users',
            data: [5, 12, 8, 15],
            backgroundColor: '#34a9a1',
        }]
    };
    
    const activityChartData = {
        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
        datasets: [
            {
                label: 'Meals',
                data: [65, 59, 80, 81, 56, 55, 40],
                backgroundColor: '#34a9a1',
            },
            {
                label: 'Health Logs',
                data: [28, 48, 40, 19, 86, 27, 90],
                backgroundColor: '#6ac0b9',
            },
            {
                label: 'Sleep Logs',
                data: [45, 39, 60, 35, 18, 25, 30],
                backgroundColor: '#a1d2ce',
            }
        ]
    };
    
    document.addEventListener('DOMContentLoaded', function() {
        const usersCtx = document.getElementById('usersChart').getContext('2d');
        new Chart(usersCtx, {
            type: 'bar',
            data: usersChartData,
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
        
        const activityCtx = document.getElementById('activityChart').getContext('2d');
        new Chart(activityCtx, {
            type: 'line',
            data: activityChartData,
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    });
</script>
{% endblock %} 